generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Event {
  id          String    @id
  name        String
  description String?
  startDate   DateTime  @map("start_date")
  endDate     DateTime  @map("end_date")
  status      Boolean
  image       String?
  checkIns    CheckIn[]
  orders      Order[]

  @@map("events")
}

model Product {
  id          String @id
  name        String
  description String
  image       String

  @@map("products")
}

model Customer {
  id       String    @id
  phone    String    @unique
  shopName String    @map("shop_name")
  joined   DateTime
  checkIns CheckIn[]

  @@map("customers")
}

model Order {
  orderId   String   @id @map("order_id")
  shopName  String   @map("shop_name")
  eventId   String   @map("event_id")
  products  String
  total     Int
  orderDate DateTime @map("order_date")
  event     Event    @relation(fields: [eventId], references: [id])

  @@map("orders")
}

model CheckIn {
  customerId  String   @map("customer_id")
  shopName    String   @map("shop_name")
  phone       String
  eventId     String   @map("event_id")
  checkInTime DateTime @default(now()) @map("check_in_time")
  customer    Customer @relation(fields: [customerId], references: [id])
  event       Event    @relation(fields: [eventId], references: [id])

  @@id([customerId, eventId])
  @@map("check_ins")
}
